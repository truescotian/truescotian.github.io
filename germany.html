<html>
  <head>
    <title>GM - Trips</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/index.css" />
    <link rel="shortcut icon" type="image/x-icon" href="static/favicon.jpg" />

    <style>
      .gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 10px;
        padding: 20px;
        width: 100%;
        box-sizing: border-box; /* include padding in width */
        justify-items: stretch; /* make grid items fill each column */
      }

      .gallery a {
        width: 100%;
        display: block;
      }

      .gallery img {
        width: 100%;
        height: auto;
        object-fit: cover;
        border-radius: 8px;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        display: block;
      }

      /* Single column on very small screens */
      @media (max-width: 480px) {
        .gallery {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <main>
      <header>
        <h1>Trips</h1>

        <div style="display: flex; justify-content: flex-start; gap: 10px">
          <a link href="index.html">Home</a>
          <a link href="pets.html">Pets</a>
          <a link href="resume.html">Resume</a>
          <a link href="lessons.html">Developer Lessons Learned</a>
          <a link href="trips.html">Trips</a>
        </div>
      </header>

      <h3>Germany</h3>
      <div class="gallery" id="gallery"></div>
    </main>
    <script>
      const awsS3Url = "https://dc1heje8qmf1j.cloudfront.net";
      const awsBucketURL = `${awsS3Url}/trips/2024/germany/`;

      const imageList = [
        "2",
        "3",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "1",
        "12",
        "13",
        "14",
        "15",
        "16",
        "17",
        "18",
        "19",
      ];

      const gallery = document.getElementById("gallery");

      // Common responsive sizes
      const sizesArray = [480, 800, 1200, 1600];

      // do this so you don't need to write a bunch of elements like <a><img></img></a>
      imageList.forEach((image) => {
        // Construct srcset string for this image
        const srcset = sizesArray
          .map((size) => `${awsBucketURL}${image}-${size}.webp ${size}w`)
          .join(",\n    ");

        // Pick a fallback size (middle)
        const src = `${awsBucketURL}${image}-800.webp`;

        const imgElement = document.createElement("img");
        imgElement.loading = "lazy";
        imgElement.src = src;
        imgElement.srcset = srcset;

        /* 
          sizes attribute describes the layout width of the image in CSS:
          - Mobile (less than 600px wide): full width (1 column)
          - Tablet (less than 900px): ~50% width
          - Desktop (less than 1200px): ~33%
          - Larger screens: ~25%
        */
        imgElement.sizes = `(max-width: 600px) 100vw,
                      (max-width: 900px) 50vw,
                      (max-width: 1200px) 33vw,
                      25vw`;

        imgElement.alt = "An image from Greg's trip to Germany";

        const aElement = document.createElement("a");
        aElement.href = src; // links to the fallback image
        aElement.target = "__blank";
        aElement.appendChild(imgElement);

        gallery.appendChild(aElement);
      });
    </script>
  </body>
</html>
